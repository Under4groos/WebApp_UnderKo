@page
@using System.Text.RegularExpressions
@model WebApp_UnderKo.Pages.apilistModel
@{
    ViewData["Title"] = "apilist";

    int count = 0;
    string name_ = string.Empty;
}
<script>
    function unsecuredCopyToClipboard(text) {
        const textArea = document.createElement("textarea");
        textArea.value = text.trim().replace('\n\t', '');
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        try {
            document.execCommand('copy');
            console.log("Copy: " + text)
        } catch (err) {
            console.error('Unable to copy to clipboard', err);
        }
        document.body.removeChild(textArea);
    }
    function copu(nameinput, namebutton) {
        let input = $('#' + nameinput)
        let text__ = input.innerHTML || input.innerText || input.textContent || input.text() || input.var()

        unsecuredCopyToClipboard(text__);
    }

</script>

<div class="container">

    @if (WebApp_UnderKo.Models.G_.CacheData.apiList != null && WebApp_UnderKo.Models.G_.CacheData.apiList.webApis != null)
    {
        @foreach (var item in WebApp_UnderKo.Models.G_.CacheData.apiList.webApis)
        {
            name_ = Regex.Replace(item.Name, "[\\W/+-=]+", "");

            <div class="accordion" id="@(name_)">

                <div class="blured bordeer-tlbr rounded-3 mb-3">
                    <h2 class="accordion-header">
                        <button class="accordion-button bordeer-tlbr-bottom text-muted"
                                style="background-color:transparent" type="button"
                                data-bs-toggle="collapse" data-bs-target="#@(name_)collapseOne"
                                aria-expanded="fl" aria-controls="@(name_)collapseOne">
                            @item.Name
                        </button>

                    </h2>

                    <div id="@(name_)collapseOne" class="accordion-collapse " data-bs-parent="#@(name_)">
                        <div class="accordion-body">
                            <div class="bordeer-tlbr p-3 rounded-3">
                                <code style="background:var(--header)" type="text" class="text-muted">
                                    @(item.URL)
                                </code>
                            </div>

                        </div>
                    </div>
                </div>


            </div>
        }

    }
    else
    {
        <h1>Навернулась шаурма</h1>
        <h2 class="ms-lg-2">Усе, приехзали, сайт сломалься </h2>
        <h3 class="ms-lg-5">Шаурvа! Шаурvvmaа, мершгнисьб!</h3>
        <h4>о нет... ее селюииыфв ббюю ю....... </h4>

        <div class="ms-lg-5">
            <h4>памаги </h4>
            <h5 class="ms-lg-5">... те </h5>
        </div>


        <div class="ms-lg-4 mt-5">
            <h4>Смерть от черезмерной мастурбации... </h4>
             
        </div>
        <div class="ms-lg-5 mt-2">
            <h6>By UnderKo</h6>

        </div>
    }

</div>

@* <div class="container">
    @foreach (var item in WebApp_UnderKo.Models.G_.CacheData.apiList.webApis)
    {
        string name_ = Regex.Replace(item.Name, "[\\W]+", "");

        <div class="accordion" id="@(name_)">

            <div class="blured bordeer-tlbr rounded-3 mb-3">
                <h2 class="accordion-header">
                    <button class="accordion-button bordeer-tlbr-bottom text-muted"
                            style="background-color:transparent" type="button"
                            data-bs-toggle="collapse" data-bs-target="#@(name_)collapseOne"
                            aria-expanded="fl" aria-controls="@(name_)collapseOne">
                        @item.Name
                    </button>

                </h2>
                <div id="@(name_)collapseOne" class="accordion-collapse collapse" data-bs-parent="#@(name_)">
                    <div class="accordion-body">

                        <p class="text-muted">@item.</p>

                        <div class="bordeer-tlbr p-3 rounded-3">
                            <code style="background:var(--header)" type="text" class="text-muted">
                                @item.InputText
                            </code>
                        </div>
                        @if (@item.InputText.StartsWith("http://") && @item.Demo)
                        {
                            <div class="bordeer-tlbr p-3 mt-3 rounded-3">

                                <iframe src="@item.InputText"></iframe>
                            </div>
                        }
                    </div>
                </div>
            </div>


        </div>
    }
</div>


<div class="bd-example d-none">


    <div class="row ">



        <div class="col-3 ">
            <nav id="navbar-example" class="blured navbar flex-column align-items-stretch p-3 bordeer-tlbr rounded-3" style="background:var(--header)">
                <a class="navbar-brand text-muted" href="#">Api</a>

                <nav class="nav nav-pills flex-column ">
                    @foreach (var item in Model.Items)
                    {
                        <a class="nav-link text-muted" href="#item-@item.Name">@item.Name</a>
                    }


                </nav>
            </nav>
        </div>


        <div class="col-8">
            <div data-bs-spy="scroll" data-bs-target="#navbar-example3" data-bs-offset="0" class="scrollspy-example-2" tabindex="0">
                @foreach (var item in Model.Items)
                {
                    string str_ = @count > 0 ? "mt-4" : "";
                    <div class="@str_ blured bordeer-tlbr rounded-3 p-3  ">
                        <h4 class="text-muted" id="item-@item.Name">@item.Name</h4>

                        <p class="text-muted">@item.Description</p>

                        <p class="text-muted">Parametrs</p>
                        <ul class="list-group bordeer-tlbr p-2" style="background:var(--header)">
                            @foreach (var opt in item.Option)
                            {
                                <ul class="list-group list-group-horizontal">
                                    <p class="text-info">@opt.Item1</p>
                                    <p class="text-muted px-1">=</p>
                                    <p class="text-muted">@opt.Item2</p>
                                </ul>
                            }

                        </ul>


                        @{
                            string button__ = $"{@count.ToString() + "-button"}";

                            string input__ = $"{@count.ToString() + "-input"}";
                        }



                        <div class="input-group mt-3">
                            <code style="background:var(--header)" type="text" class="bordeer-tlbr text-muted form-control" id="@input__">
                                @item.InputText
                            </code>
                        </div>
                        <div class="mt-2">
                            <button class="btn btn-dark bordeer-tlbr" type="button" id="@button__"
                                    data-toggle="tooltip" data-placement="button"
                                    title="Copy to Clipboard" onclick="copu('@input__' , '@button__')">
                                Copy
                            </button>
                            <button class="btn btn-dark bordeer-tlbr" type="button" id="@button__"
                                    data-toggle="tooltip" data-placement="button"
                                    title="Copy to Clipboard" onclick="window.open('@item.InputText','_blank');">
                                Show in Browser
                            </button>
                        </div>
                        @if (@item.InputText.StartsWith("http://"))
                        {
                            <iframe src="@item.InputText" class="p-3 text-muted pre" width="100%" height="230"></iframe>
                        }


                    </div>
                    count++;
                }


            </div>
        </div>



    </div>
</div> *@